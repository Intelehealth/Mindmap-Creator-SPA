<form [formGroup]="myForm" (ngSubmit)="onSubmit()">
  <div class="container">
    <div class="row form-floating mb-3">
      <div class="col-sm form-floating mb-3">
        <input
          type="text"
          class="form-control"
          id="txtText"
          placeholder=""
          name="txtText"
          [(ngModel)]="healthdata.text"
          formControlName="txtText"
          title="{{tooltips.txtText}}"
          list="symptomList"
          (change)="onTextSelection($event)"
          required
          #txtText
        />
        <datalist id="symptomList">
          <option value="Associated symptoms"></option>
        </datalist>
        <label for="txtText">Text</label>
        <p class="text-danger" *ngIf="!txtText.value">
          Text cannot be blank
        </p>
      </div>
      <div class="col-sm form-floating mb-3">
        <input
          type="text"
          class="form-control"
          id="txtassocomplaint"
          placeholder=""
          name="txtassocomplaint"
          formControlName="txtassocomplaint"
          title="{{tooltips.txtassocomplaint}}"
          [(ngModel)]="healthdata.associated_complaint"
        />
        <label for="txtassocomplaint">Associated Complaint</label>
      </div>
    </div>
    <h6>Node Rules</h6>
    <hr/>
    <div class="row form-floating mb-3">
      <div class="col-sm form-floating mb-3">
        <select
          name="txtInputType"
          id="txtInputType"
          class="form-select"
          [(ngModel)]="healthdata.input_type"
          formControlName="txtInputType"
          title="{{tooltips.txtInputType}}"
        >
          <option value="number" selected="selected">number</option>
          <option value="text">text</option>
          <option value="date">date</option>
          <option value="duration">duration</option>
          <option value="camera">camera</option>
          <option value="area">area</option>
        </select>
        <label for="txtInputType">Input Type</label>
      </div>
      <div class="col-sm form-floating mb-3">
        <select
          name="txtGender"
          id="txtGender"
          class="form-select"
          [(ngModel)]="healthdata.gender"
          formControlName="txtGender"
          title="{{tooltips.txtGender}}"
        >
          <option value="male" selected="selected">male</option>
          <option value="female">female</option>
          <option value="other">other</option>
        </select>
        <label for="txtgender">Gender</label>
      </div>
    </div>

    <div class="row form-floating mb-3">
      <div class="col-sm form-floating mb-3">
        <select
          name="txtAgeMin"
          id="txtAgeMin"
          class="form-select"
          formControlName="txtAgeMin"
          title="{{tooltips.txtAgeMin}}"
          [(ngModel)]="healthdata.age_min"
          #txtAgeMin
        >
          <option *ngFor="let age of ages" [ngValue]="age">{{ age }}</option>
        </select>
        <label for="txtAgeMin">Age Min</label>
      </div>
      <div class="col-sm form-floating mb-3">
        <select
          name="txtAgeMax"
          id="txtAgeMax"
          class="form-select"
          [(ngModel)]="healthdata.age_max"
          #txtAgeMax
          formControlName="txtAgeMax"
          title="{{tooltips.txtAgeMax}}"
        >
          <option *ngFor="let age of ages" [ngValue]="age">{{ age }}</option>
        </select>
        <label for="txtAgeMax">Age Max</label>
        <p class="text-danger" *ngIf="myForm.hasError('invalidDateRange')">
          Max age must be greater than Min age
        </p>
      </div>
    </div>
    <div class="row form-floating mb-3">
      <div class="col-sm form-floating mb-3">
        <select
          name="ddisRequired"
          id="ddisRequired"
          class="form-select"
          formControlName="ddisRequired"
          title="{{tooltips.ddisRequired}}"
          [(ngModel)]="healthdata.isRequired"
          placeholder="Is Required"
        >
          <option [ngValue]="true">true</option>
          <option [ngValue]="false">false</option>
        </select>
        <label for="ddisRequired">Is this question Required?</label>
      </div>
      <div class="col-sm form-floating mb-3">
        <select
          name="ddMultiChoice"
          id="ddMultiChoice"
          class="form-select"
          formControlName="ddMultiChoice"
          title="{{tooltips.ddMultiChoice}}"
          [(ngModel)]="healthdata.multi_choice"
          placeholder="Multi Choice"
        >
          <option [ngValue]="true">true</option>
          <option [ngValue]="false">false</option>
        </select>
        <label for="ddMultiChoice">Multi Choice</label>
      </div>
    </div>

    <div class="row form-floating mb-3">
      <div class="col-sm form-floating mb-3">
        <select
          name="ddExcludeMultiChoice"
          id="ddExcludeMultiChoice"
          class="form-select"
          formControlName="ddExcludeMultiChoice"
          title="{{tooltips.ddExcludeMultiChoice}}"
          [(ngModel)]="healthdata.exclude_from_multi_choice"
          placeholder="Exclude From Multi Choice"
        >
          <option [ngValue]="true">true</option>
          <option [ngValue]="false">false</option>
        </select>
        <label for="ddExcludeMultiChoice">Exclude From Multi Choice</label>
      </div>
      <div class="col-sm form-floating mb-3">
        <input
          type="text"
          class="form-control"
          id="txtDisplay"
          placeholder=""
          name="txtDisplay"
          [(ngModel)]="healthdata.display"
          formControlName="txtDisplay"
          title="{{tooltips.txtDisplay}}"
        />
        <label for="txtDisplay">Display (English)</label>
      </div>
    </div>

    <div class="row form-floating mb-3">
      <div class="col-6 form-floating mb-3">
        <input
          type="text"
          class="form-control"
          id="txtLanguage"
          placeholder=""
          name="txtLanguage"
          [(ngModel)]="healthdata.language"
          formControlName="txtLanguage"
          title="{{tooltips.txtLanguage}}"
        />
        <label for="txtLanguage">Language to be shown in history note</label>
      </div>
    </div>
    <h6>Triggers</h6>
    <hr/>
    <div class="row form-floating mb-3">
      <div class="col-sm form-floating mb-3">
        <input
          type="text"
          class="form-control"
          id="txtPPE"
          placeholder=""
          name="txtPPE"
          [(ngModel)]="healthdata.perform_physical_exam"
          formControlName="txtPPE"
          title="{{tooltips.txtPPE}}"
        />
        <label for="txtPPE">Perform Physical Exam</label>
      </div>
      <div class="col-sm form-floating mb-3">
        <input
          type="text"
          class="form-control"
          id="txtjobaidtype"
          placeholder=""
          name="txtjobaidtype"
          formControlName="txtjobaidtype"
          title="{{tooltips.txtjobaidtype}}"
          [(ngModel)]="healthdata.job_aid_type"
        />
        <label for="txtjobaidtype">Job Aid Type</label>
      </div>
    </div>
    <div class="row form-floating mb-3">
      <div class="col-6 form-floating mb-3">
        <input
          type="text"
          class="form-control"
          id="txtjobaidfile"
          placeholder=""
          name="txtjobaidfile"
          formControlName="txtjobaidfile"
          title="{{tooltips.txtjobaidfile}}"
          [(ngModel)]="healthdata.job_aid_file"
        />
        <label for="txtjobaidfile">Job Aid File</label>
      </div>
    </div>
    <h6>Alerts</h6>
    <hr/>
    <div class="row form-floating mb-3">
      <div class="col-sm form-floating mb-3">
        <textarea
          class="form-control"
          id="txtpopup"
          placeholder=""
          name="txtpopup"
          formControlName="txtpopup"
          title="{{tooltips.txtpopup}}"
          rows="3"
          [(ngModel)]="healthdata.pop_up"
        ></textarea>
        <label for="txtpopup">Pop Up</label>
      </div>
      <div class="col-sm form-floating mb-3">
        <textarea
          class="form-control"
          id="txtpopupor"
          placeholder=""
          name="txtpopupor"
          formControlName="txtpopupor"
          title="{{tooltips.txtpopupor}}"
          rows="3"
          [(ngModel)]="healthdata.pop_up_or"
        ></textarea>
        <label for="txtpopupor">Pop Up (Odiya)</label>
      </div>
    </div>
    <div class="row form-floating mb-3">
      <div class="col-6 form-floating mb-3">
        <textarea
          class="form-control"
          id="txtpopuphi"
          placeholder=""
          name="txtpopuphi"
          formControlName="txtpopuphi"
          title="{{tooltips.txtpopuphi}}"
          rows="3"
          [(ngModel)]="healthdata.pop_up_hi"
        ></textarea>
        <label for="txtpopuphi">Pop Up (Hindi)</label>
      </div>
    </div>
    <h6>Translations</h6>
    <hr/>
    <div class="row form-floating mb-3">
      <div class="col-sm form-floating mb-3">
        <input
          type="text"
          class="form-control"
          id="txtDisplayHI"
          placeholder=""
          name="txtDisplayHI"
          [(ngModel)]="healthdata.display_hi"
          formControlName="txtDisplayHI"
          title="{{tooltips.txtDisplayHI}}"
        />
        <label for="txtDisplayHI">Display (Hindi)</label>
      </div>
      <div class="col-sm form-floating mb-3">
        <input
          type="text"
          class="form-control"
          id="txtDisplayOR"
          placeholder=""
          name="txtDisplayOR"
          [(ngModel)]="healthdata.display_or"
          formControlName="txtDisplayOR"
          title="{{tooltips.txtDisplayOR}}"
        />
        <label for="txtDisplayOR">Display (Odiya)</label>
      </div>
    </div>
    <h6>Citation</h6>
    <hr/>
    <div class="row form-floating mb-3">
      <div class="col-sm form-floating mb-3">
        <textarea
          class="form-control"
          id="txtcitation"
          placeholder=""
          name="txtcitation"
          formControlName="txtcitation"
          title="{{tooltips.txtcitation}}"
          rows="3"
          [(ngModel)]="healthdata.citation"
        >
        </textarea>
        <label for="txtpopup">Citation</label>
      </div>
      <div class="col-sm form-floating mb-3">
        <input
          type="text"
          class="form-control"
          id="txtsnomed"
          placeholder=""
          name="txtsnomed"
          formControlName="txtsnomed"
          title="{{tooltips.txtsnomed}}"
          [(ngModel)]="healthdata.snomed"
        />
        <label for="txtsnomed">Snomed</label>
      </div>
    </div>
    <div class="row form-floating mb-3">
      <div class="col-sm form-floating mb-3">
        <input
          type="text"
          class="form-control"
          id="txticd"
          placeholder=""
          name="txticd"
          formControlName="txticd"
          title="{{tooltips.txticd}}"
          [(ngModel)]="healthdata.icd_10"
        />
        <label for="txticd">ICD-10</label>
      </div>
      <div class="col-sm form-floating mb-3">
        <input
          type="text"
          class="form-control"
          id="txtloinc"
          placeholder=""
          name="txtloinc"
          formControlName="txtloinc"
          title="{{tooltips.txtloinc}}"
          [(ngModel)]="healthdata.loinc"
        />
        <label for="txtloinc">LOINC</label>
      </div>
    </div>
    <div class="row form-floating mb-3">
      <div class="col-sm form-floating mb-3" *ngIf="positiveCondition">
        <input
          type="text"
          class="form-control"
          id="txtPosCon"
          placeholder=""
          name="txtPosCon"
          [(ngModel)]="healthdata.pos_condition"
          formControlName="txtPosCon"
          title="{{tooltips.txtPosCon}}"
        />
        <label for="txtPosCon">Positive Condition</label>
      </div>
      <div class="col-sm form-floating mb-3" *ngIf="negativeCondition">
        <input
          type="text"
          class="form-control"
          id="txtNegCon"
          placeholder=""
          name="txtNegCon"
          [(ngModel)]="healthdata.neg_condition"
          formControlName="txtNegCon"
          title="{{tooltips.txtNegCon}}"
        />
        <label for="txtNegCon">Negative Condition</label>
      </div>
    </div>

    <div class="form-floating mb-3 text-center">
      <button type="submit" class="btn btn-primary btn-lg popup-save-btn" [disabled]="!myForm.valid" title="Save Edited Data">
        Save
      </button>
      <button
        type="button"
        class="btn btn-outline-secondary btn-lg ms-3 popup-cancel-btn"
        (click)="modal.close()"
        title="Cancel"
      >
        Cancel
      </button>
    </div>
  </div>
</form>
